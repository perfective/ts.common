= Roadmap
:ecma-es6: https://262.ecma-international.org/6.0
:eslint-rules: https://eslint.org/docs/latest/rules
:mdn-js-globals: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects
:mdn-js-operators: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators
:perfective-common: https://github.com/perfective/ts.common/blob/main/src/

The primary development focus is to provide convenient functions
and detailed documentation in the existing packages.

== Version 1.0

* Must target https://262.ecma-international.org/6.0/[ECMAScript 6].
* May support newer versions of ECMAScript if they have wide browser or TypeScript support.
* Legacy browsers support may be provided using `@babel`.


== Packages

* `@perfective/common/array`:
** [Consider] Rename `Compare` into `Order`.
+
* `@perfective/common/date`:
** Add support for the
`link:{mdn-js-globals}/Date[Date]` type.
+
* `@perfective/common/function`:
** Ensure coverage of the
`link:{mdn-js-globals}/Function[Function]`,
`link:{mdn-js-globals}/Generator[Generator]`,
and `link:{mdn-js-globals}/GeneratorFunction[GeneratorFunction]` types.
** Consider support for
`link:{mdn-js-globals}/AsyncFunction[AsyncFunction]` (ES 8)
+
* `@perfective/common/i18n`:
** Add support for localization functions.
+
* `@perfective/common/number`:
** Ensure coverage of:
*** `link:{mdn-js-globals}/Number[Number]`
*** `link:{mdn-js-globals}/Math[Math]`
*** `link:{mdn-js-globals}/Infinity[Infinity]`
/ `link:{mdn-js-globals}/Number/NEGATIVE_INFINITY[Number.NEGATIVE_INFINITY]`
/ `link:{mdn-js-globals}/Number/POSITIVE_INFINITY[Number.POSITIVE_INFINITY]`
*** `link:{mdn-js-globals}/Number/isFinite[Number.isFinite()]`
/ `link:{mdn-js-globals}/isFinite[isFinite()]`
*** `link:{mdn-js-globals}/NaN[NaN]`
/ `link:{mdn-js-globals}/isNaN[isNaN()]`
/ `link:{mdn-js-globals}/Number/isNaN[Number.isNaN()]`
+
* `@perfective/common/object`:
** [Consider] Rename `hasDefinedProperty()` into `hasDefined(property)` (and other similar functions).
** [Consider] Rename `ObjectWithDefined` into `HasDefined` (and other similar types).
+
* `@perfective/common/promise`:
** Ensure coverage of the
`link:{mdn-js-globals}/Promise[Promise]` type.
+
* `@perfective/common/reflect`:
** Add support for the
`link:{mdn-js-globals}/Reflect[Reflect]` type.
+
* `@perfective/common/regexp`:
** Add support for the
`link:{mdn-js-globals}/RegExp[RegExp]` type.
+
* `@perfective/common/symbol`:
** Add support for the
`link:{mdn-js-globals}/Symbol[Symbol]` type.
+
* `@perfective/common/uri`:
** Ensure support of:
`link:{mdn-js-globals}/encodeURI[encodeURI]`
/ `link:{mdn-js-globals}/encodeURIComponent[encodeURIComponent]`,
`link:{mdn-js-globals}/decodeURI[decodeURI]`
/ `link:{mdn-js-globals}/decodeURIComponent[decodeURIComponent]`,
and `link:{mdn-js-globals}/URIError[URIError]`.
** Consider custom support for:
`link:{mdn-js-globals}/escape[escape]`
/ `link:{mdn-js-globals}/unescape[unescape]`.
+
* `@perfective/common/url`
** Add support for the
`link:https://developer.mozilla.org/en-US/docs/Web/API/URL[URL]` WebAPI.

== ECMAScript Coverage

* Only versions starting from ECMAScript 2015 (`ES6`) are considered.
* The version `ES6` means that the feature is available in `ES6`,
even if it was introduced earlier.
* All versions after `ES6` are written in their year-based format (e.g. `ES2016`).

=== `link:{mdn-js-globals}/Boolean[Boolean]`

The `link:{perfective-common}/boolean/index.adoc[@perfective/common/boolean]` package covers the `Boolean` type.

[cols="~,1,~"]
|===
| JavaScript | Version | Perfective

3+| *Constructor*

| `link:{mdn-js-globals}/Boolean/Boolean[new Boolean()]`
| ES6
| *Disallowed*.
Use ESLint the `link:{eslint-rules}/no-new-wrappers[no-new-wrappers]` to enforce.

In conditional statements, `new Boolean(false)` evaluates to `true`,
so using the `Boolean` object is strongly discouraged.

| `link:{mdn-js-globals}/Boolean/Boolean[Boolean]`
| ES6
| Use the `isTruthy()`/`isFalsy()` predicates.

3+| *Methods*

| `link:{mdn-js-globals}/Boolean/toString[toString()]`
| ES6
| Use the `link:{mdn-js-globals}/String/String[String()]` function.

| `link:{mdn-js-globals}/Boolean/valueOf[valueOf()]`
| ES6
| *Not Supported*. As the `new Boolean()` constructor is _disallowed_,
there is no need in using the `valueOf()` method.

When a primitive value is expected, JavaScript invokes `valueOf()` automatically.

3+| *Operators*

| link:{mdn-js-operators}/Equality[Equality] (`==`)
| ES6
| *Disallowed*. Use the ESLint `link:{eslint-rules}/eqeqeq[eqeqeq]` rule to enforce.

The loose equality has obscure behavior:
`'0' == false` and `[] == false`,
but `null != false`, `undefined != false`, and `{} != false`.

_Always_ use strict equality.
When you need to coerce multiple types with logic that does not match `isTruthy()`/`isFalsy()`,
write an explicit `Predicate`.

| link:{mdn-js-operators}/Inequality[Inequality] (`!=`)
| ES6
| *Disallowed*. Use the ESLint `link:{eslint-rules}/eqeqeq[eqeqeq]` rule to enforce.

| link:{mdn-js-operators}/Logical_AND[Logical AND] (`&&`)
| ES6
| *Allowed*.
Use `all()`/`neither()` for lazy evaluation and callbacks.

| link:{mdn-js-operators}/Logical_AND_assignment[Logical AND assignment] (`&&=`)
| ES6
| *Discouraged* as it mutates the value.

| link:{mdn-js-operators}/Logical_NOT[Logical NOT] (`!`)
| ES6
| *Allowed*.
Use `not()` for lazy evaluation and callbacks.

| link:{mdn-js-operators}/Logical_NOT#double_not_!![Double NOT] (`!!`)
| ES6
| *Disallowed*. Use the `isTruthy()` /`isFalsy()` predicates.

| link:{mdn-js-operators}/Logical_OR[Logical OR] (`\|\|`)
| ES6
| *Allowed*.
Use `either()` for lazy evaluation and callbacks.

| link:{mdn-js-operators}/Logical_OR_assignment[Logical OR assignment] (`\|\|=`)
| ES6
| *Discouraged* as it mutates the value.

| link:{mdn-js-operators}/Strict_equality[Strict equality] (`===`)
| ES6
| *Allowed*. Use `is()` for lazy evaluation and callbacks.

| link:{mdn-js-operators}/Strict_inequality[Strict inequality] (`!==`)
| ES6
| *Allowed*. Use `isNot()` for lazy evaluation and callbacks.

|===


=== `link:{mdn-js-globals}/Date[Date]`

The `link:{perfective-common}/date/index.adoc[@perfective/common/date]` package covers the  link:{ecma-es6}/#sec-date-objects[ES6 Date objects].

[cols="~,1,~"]
|===
| JavaScript | Version | Perfective

3+| *Constructor*

| `link:{mdn-js-globals}/Date/Date[new Date()]`
| `link:{ecma-es6}/#sec-date-constructor-date[ES6]`
| *Discouraged*. Instead, use the `now()` function to create the current `Date` object,
as it relies on the `Date.now` function that can be mocked in the tests.

| `link:{mdn-js-globals}/Date/Date[new Date(value)]`
| `link:{ecma-es6}/#sec-date-value[ES6]`
| *Supported*. Use the `date()` function to pass a timestamp.
(Note: it returns `null` instead of "Invalid Date", if the timestamp is invalid).

| `link:{mdn-js-globals}/Date/Date[new Date(dateString)]`
| `link:{ecma-es6}/#sec-date-value[ES6]`
| *Supported*. Use the `date()` function to pass a string.
(Note: it returns `null` instead of "Invalid Date", if parsing fails).

| `link:{mdn-js-globals}/Date/Date[new Date(dateObject)]`
| `link:{ecma-es6}/#sec-date-value[ES6]`
| *Supported*. Use the `date()` function to copy a `Date`.
(Note: it returns `null` when given an "Invalid Date").

| `link:{mdn-js-globals}/Date/Date[new Date(year, monthIndex, ...)]`
| `link:{ecma-es6}/#sec-date-year-month-date-hours-minutes-seconds-ms[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/Date[Date()]`
| `link:{ecma-es6}/#sec-date-constructor-date[ES6]`
| *Discouraged*. Use the `date()` function instead.

3+| *Methods*

| `link:{mdn-js-globals}/Date/@@toPrimitive[@@toPrimitive()]`
| `link:{ecma-es6}/#sec-date.prototype.[ES6]`
| *Discouraged*. Use explicit conversions instead.

| `link:{mdn-js-globals}/Date/getDate[getDate()]`
| `link:{ecma-es6}/#sec-date.prototype.getdate[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getDay[getDay()]`
| `link:{ecma-es6}/#sec-date.prototype.getday[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getFullYear[getFullYear()]`
| `link:{ecma-es6}/#sec-date.prototype.getfullyear[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getHours[getHours()]`
| `link:{ecma-es6}/#sec-date.prototype.gethours[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getMilliseconds[getMilliseconds()]`
| `link:{ecma-es6}/#sec-date.prototype.getmilliseconds[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getMinutes[getMinutes()]`
| `link:{ecma-es6}/#sec-date.prototype.getminutes[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getMonth[getMonth()]`
| `link:{ecma-es6}/#sec-date.prototype.getmonth[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getSeconds[getSeconds()]`
| `link:{ecma-es6}/#sec-date.prototype.getseconds[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getTime[getTime()]`
| `link:{ecma-es6}/#sec-date.prototype.gettime[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getTimezoneOffset[getTimezoneOffset()]`
| `link:{ecma-es6}/#sec-date.prototype.gettimezoneoffset[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCDate[getUTCDate()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcdate[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCDay[getUTCDay()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcday[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCFullYear[getUTCFullYear()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcfullyear[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCHours[getUTCHours()]`
| `link:{ecma-es6}/#sec-date.prototype.getutchours[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCMilliseconds[getUTCMilliseconds()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcmilliseconds[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCMinutes[getUTCMinutes()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcminutes[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCMonth[getUTCMonth()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcmonth[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getUTCSeconds[getUTCSeconds()]`
| `link:{ecma-es6}/#sec-date.prototype.getutcseconds[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/getYear[getYear()]`
| link:{ecma-es6}/#sec-date.prototype.getyear[ES6]
| *Disallowed*. The method is deprecated.

| `link:{mdn-js-globals}/Date/now[Date.now()]`
| `link:{ecma-es6}/#sec-date.now[ES6]`
a|
* Use the `now()` function to create the current `Date`.
`now()` uses `Date.now()`, so it can be mocked in tests.
+
* Use the `Date.now()` when you need a timestamp.

| `link:{mdn-js-globals}/Date/parse[Date.parse()]`
| `link:{ecma-es6}/#sec-date.parse[ES6]`
| *Discouraged*. `Date.parse()` returns `NaN` if the value cannot be parsed.
Instead, use the `date()` and `timestamp()` functions with `maybe()`.

| `link:{mdn-js-globals}/Date/setDate[setDate()]`
| `link:{ecma-es6}/#sec-date.prototype.setdate[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setFullYear[setFullYear()]`
| `link:{ecma-es6}/#sec-date.prototype.setfullyear[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setHours[setHours()]`
| `link:{ecma-es6}/#sec-date.prototype.sethours[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setMilliseconds[setMilliseconds()]`
| `link:{ecma-es6}/#sec-date.prototype.setmilliseconds[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setMinutes[setMinutes()]`
| `link:{ecma-es6}/#sec-date.prototype.setminutes[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setMonth[setMonth()]`
| `link:{ecma-es6}/#sec-date.prototype.setmonth[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setSeconds[setSeconds()]`
| `link:{ecma-es6}/#sec-date.prototype.setseconds[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setTime[setTime()]`
| `link:{ecma-es6}/#sec-date.prototype.settime[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCDate[setUTCDate()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcdate[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCFullYear[setUTCFullYear()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcfullyear[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCHours[setUTCHours()]`
| `link:{ecma-es6}/#sec-date.prototype.setutchours[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCMilliseconds[setUTCMilliseconds()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcmilliseconds[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCMinutes[setUTCMinutes()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcminutes[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCMonth[setUTCMonth()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcmonth[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setUTCSeconds[setUTCSeconds()]`
| `link:{ecma-es6}/#sec-date.prototype.setutcseconds[ES6]`
| *Disallowed*. The method mutates the date.

| `link:{mdn-js-globals}/Date/setYear[setYear()]`
| link:{ecma-es6}/#sec-date.prototype.setyear[ES6]
| *Disallowed*. The method is deprecated and mutates the date.

| `link:{mdn-js-globals}/Date/toDateString[toDateString()]`
| `link:{ecma-es6}/#sec-date.prototype.todatestring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toISOString[toISOString()]`
| `link:{ecma-es6}/#sec-date.prototype.toisostring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toJSON[toJSON()]`
| `link:{ecma-es6}/#sec-date.prototype.tojson[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toLocaleDateString[toLocaleDateString()]`
| `link:{ecma-es6}/#sec-date.prototype.tolocaledatestring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toLocaleString[toLocaleString()]`
| `link:{ecma-es6}/#sec-date.prototype.tolocalestring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toLocaleTimeString[toLocaleTimeString()]`
| `link:{ecma-es6}/#sec-date.prototype.tolocaletimestring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toString[toString()]`
| `link:{ecma-es6}/#sec-date.prototype.tostring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toTimeString[toTimeString()]`
| `link:{ecma-es6}/#sec-date.prototype.totimestring[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/toUTCString[toUTCString()]`
| `link:{ecma-es6}/#sec-date.prototype.toutcstring[ES6]`
| *TBD* (Alias: `link:{ecma-es6}/#sec-date.prototype.togmtstring[toGMTString()]`).

| `link:{mdn-js-globals}/Date/UTC[Date.UTC()]`
| `link:{ecma-es6}/#sec-date.utc[ES6]`
| *TBD*

| `link:{mdn-js-globals}/Date/valueOf[valueOf()]`
| `link:{ecma-es6}/#sec-date.prototype.valueof[ES6]`
a| *Discouraged*. Use the `timestamp()` function to get the timestamp.

* `valueOf()` returns `NaN` for invalid dates.
* `timestamp()` returns `null` for invalid dates.

|===


=== `link:{mdn-js-globals}/Function[Function]`

The `link:{perfective-common}/function/index.adoc[@perfective/common/function]` package covers the `Function` type.

[cols="~,1,~"]
|===
| JavaScript | Version | Perfective

3+| *Constructor*

| `link:{mdn-js-globals}/Function/Function[new Function()]`
| ES6
| *Disallowed* as unsafe.

| `link:{mdn-js-globals}/Function/Function[Function()]`
| ES6
| *Disallowed* as unsafe.

3+| *Properties*

| `link:{mdn-js-globals}/Function/arguments[arguments]`
|
| *Disallowed* as deprecated and non-standard.

| `link:{mdn-js-globals}/Function/caller[caller]`
|
| *Disallowed* as deprecated and non-standard.

| `link:{mdn-js-globals}/Function/displayName[displayName]`
|
| *Disallowed* as non-standard.

| `link:{mdn-js-globals}/Function/length[length]`
| ES6
a|
* `Length` type and its functions.
* `isNullary()`, `isUnary()`, `isBinary()`, and `isTernary()` predicates.

| `link:{mdn-js-globals}/Function/name[name]`
| ES6
| *TODO*

| `link:{mdn-js-globals}/Function/prototype[prototype]`
| ES6
| *Allowed* but without custom support.

3+| *Methods*

| `link:{mdn-js-globals}/Function/@@hasInstance[@@hasInstance]`
| ES6
| *Supported* via the `instanceof` operator.

| `link:{mdn-js-globals}/Function/apply[apply()]`
| ES6
| *TODO*.

| `link:{mdn-js-globals}/Function/bind[bind()]`
| ES6
| *TODO*.

| `link:{mdn-js-globals}/Function/call[call()]`
| ES6
| *TODO*.

| `link:{mdn-js-globals}/Function/toString[toString()]`
| ES6
| Use the `link:{mdn-js-globals}/String/String[String()]` function.

3+| *Operators*

| `link:{mdn-js-operators}/instanceof[instanceof]`
| ES6
a|
* `Instance`, `isInstanceOf()`, `isNotInstanceOf()`
(from `link:{perfective-common}/value/index.adoc[@perfective/common]`).

|===


== References

* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference[MDN JavaScript Reference]
* https://en.wikipedia.org/wiki/ECMAScript[ECMAScript Wikipedia]
* https://262.ecma-international.org/6.0/[ECMA Script 2015 Specification]
